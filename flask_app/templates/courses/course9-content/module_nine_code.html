{% extends "base.html" %}

{% block title %}
<title>Coding the Robot Movement - CORE</title>
{% endblock %}

{% block body %}
<div class="course-container">
    <!-- Sidebar for module navigation -->
    <div class="course-sidebar">
        <div class="course-sidebar-header">
            <i class="fas fa-list"></i>
            <span>Contents</span>
        </div>
        <ul class="course-list">
            <li class="course-item"> 
                <a href="{{ url_for ('module_nine') }}" class="course-link">Objectives</a>
            </li>
            <li class="course-item">
                <a href="{{ url_for ('module_nine_about') }}" class="course-link">About</a>
            </li>
            <li class="course-item">
                <a href="{{ url_for ('module_nine_given') }}" class="course-link">Environment</a>
                <ul class="sub-list">
                    <li><a href="#word-bank-fetch-organize">Word Bank</a></li>
                    <li><a href="#given-fetch-organize">What is Given</a></li>
                    <li><a href="#retrieve-fetch-organize">What needs to be Retrieved</a></li>
                </ul>
            </li>
            <li class="course-item active">
                <a href="{{ url_for ('module_nine_code') }}" class="course-link">Coding Logic</a>
                <ul class="sub-list">
                    <li><a href="#word-bank-fetch-organize">Word Bank</a></li>
                    <li><a href="#code-fetch-organizee">What Needs to Be Coded</a></li>
                </ul>
            </li>
            <li class="course-item">
                <a href="{{ url_for ('module_nine_link') }}" class="course-link">Time to Code</a>
            </li>
        </ul>
    </div> <!-- End of course-sidebar -->

    <div class="course-main-content">
        <!-- Page Header -->
        <header class="page-header">
            <h1 class="page-title">Coding the Robot Movement</h1>
            <p class="page-description">Learn how to implement the logic required to use the Fetch Reach Robot.</p>
        </header>

        <!-- Word Bank Section -->
        <div class="word-bank" id="word-bank-fetch-organize" style="background-color: #f9f9ff; border: 1px solid #ddd; padding: 20px; border-radius: 8px; margin: 20px 0;">
            <h3 style="font-size: 1.8rem; color: #333; text-align: center;">üìö Word Bank</h3>
            <p style="font-size: 1rem; color: #555; text-align: center;">Key terms for this module:</p>
            <ul style="list-style: none; padding: 0;">
                <li style="margin: 10px 0;">
                    <strong>üì¶ Environment (env):</strong> The virtual space where the robot operates.
                </li>
                <li style="margin: 10px 0;">
                    <strong>üîß ReachEnv:</strong> The specific environment object for the task setup.
                </li>
                <li style="margin: 10px 0;">
                    <strong>üìè Distance Threshold:</strong> Maximum allowable distance between gripper and ball.
                </li>
                <li style="margin: 10px 0;">
                    <strong>üîÑ Step Size:</strong> Incremental movement of the gripper.
                </li>
                <li style="margin: 10px 0;">
                    <strong>üéØ Ball Position:</strong> Current coordinates of the ball.
                </li>
                <li style="margin: 10px 0;">
                    <strong>ü§ñ Gripper Position:</strong> Current coordinates of the robot's gripper.
                </li>
                <li style="margin: 10px 0;">
                    <strong>üß≠ Direction:</strong> Vector from gripper to ball.
                </li>
            </ul>
        </div>

        <!-- Section: What Needs to be Coded -->
        <div class="module-section" id="code-fetch-organizee">
            <h3>What Needs to be Coded</h3>
            <ul>
                <li><strong>Open the Gripper:</strong> Start by ensuring the gripper is in the open position, allowing it to grab the box. This involves sending an action command to the robot to spread the gripper fingers apart.</li>
                <li><strong>Move the Gripper Horizontally Towards the Object:</strong> The gripper should move in the horizontal plane (X and Y directions) until it aligns with the box. This requires calculating the horizontal distance between the gripper and the object and making small, incremental steps in that direction until the gripper is close enough.</li>
                <li><strong>Lower the Gripper to Grasp the Object:</strong> Once horizontally aligned, the gripper needs to move downward (in the Z direction) until it is at the correct height to grasp the object. This ensures that the gripper can securely hold the object.</li>
                <li><strong>Close the Gripper Around the Object:</strong> After reaching the box, send a command to close the gripper. This action should securely hold the object in place.</li>
                <li><strong>Check the Object's Color:</strong> After closing the gripper, retrieve the object's color using its geometry ID. Compare this color to the target color. If the color matches the target, proceed to move the object to the container. If it does not match, release the object and return the gripper to the starting position.</li>
                <li><strong>Pause to Stabilize the Grasp:</strong> Allow the robot to hold the object for a brief moment to ensure it is stable and the grasp is firm. This avoids any unintended movements while lifting or moving the object.</li>
                <li><strong>Lift the Object:</strong> The gripper should then move slightly upward to lift the box off the surface. This action ensures that the box is ready to be transported without dragging.</li>
                <li><strong>Move the Object Toward the Container:</strong> Calculate the direction from the gripper to the container and normalize it. Move the gripper incrementally in that direction until the object is within the distance from the container.</li>
                <li><strong>Release the Object into the Container:</strong> Release the object into the container. This action completes the placement process.</li>
                <li><strong>Return the Gripper to the Starting Position:</strong> After releasing the object, move the gripper back to its initial position to prepare for the next object.</li>
            </ul>
        </div> <!-- End of What Needs to be Coded Section -->

        <!-- Next Button -->
        <div class="navigation-buttons mt-4">
            <a href="{{ url_for('module_nine_given') }}" class="secondary-button">Back: Environment</a>
            <a href="{{ url_for('module_ten') }}" class="secondary-button">Next: Modulde 10</a>
        </div>

    </div> <!-- End of course-main-content -->
</div> <!-- End of course-container -->
{% endblock %}
